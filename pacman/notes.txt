###
### Stuff about Pacman, packages and config
###

##########################################
# TODO:
# - Base package installation
#   - So, I need a way to install all of the base dependencies for my setup.
# - ???


### Nerd Fonts:
- Fonts Augmented with Glyphs.
- See: https://github.com/ryanoasis/nerd-fonts/wiki/Glyph-Sets-and-Code-Points

##########################################
# Allowing full Desktop sharing:
#

# Video/Audio sharing
sudo pacman -S pipewire pipewire-pulse wireplumber

# Desktop sharing
sudo pacman -S xdg-desktop-portal xdg-desktop-portal-wlr

# Ensure XDG_CURRENT_DESKTOP=sway and XDG_SESSION_TYPE=wayland are set

Launch with Wayland: chromium --ozone-platform=wayland --enable-features=WaylandWindowDecorations (or edit desktop file).
Go to chrome://flags/#enable-webrtc-pipewire-capturer (or edge://flags/), set to "Enabled", relaunch.
Open teams.microsoft.com, join meeting, share screenâ€”select entire screen.

If black: Run systemctl --user restart xdg-desktop-portal xdg-desktop-portal-wlr.


# Slack: (note: I wasn't able to get Slack to work because the version I was on wanted X11)
Update to Slack 4.38.115+ (fixes Wayland black screens/crashes).

If using desktop app (DEB/RPM/Snap/Flatpak), add --enable-features=WebRTCPipeWireCapturer to Exec line in ~/.local/share/applications/slack.desktop (copy from /usr/share/ first).

# Stopping Pipewire.

systemctl --user disable pipewire pipewire-pulse pipewire.socket


##########################################
# Viewing Media

mpv - videos
imv - displaying images


##########################################
# Environment Related

##########
# direnv
# This is to setup different environments in different source directories.
pacman -S direnv

# setup:

1. Create a .envrc file inside of the directory you want.
- for my example, to change into a specific python venv:
$ cat .envrc
source .venv/bin/activate
2. direnv allow
3. Then changing in and out of the dir automatically loads/unloads the virtual env.


# LSD a better ls.


######
# Krew - Kubectl plugins:
sudo pacman -S krew
kubectl krew install modify-secret


##########################################
# NeoVim Plugins
#

###########
# Pyright
# MS makes this but it is MIT license and faster than Jedi

pacman -S pyright



##############
# Dumb X11 stuff
sudo pacman -S xdg-desktop-portal xdg-desktop-portal-wlr xdg-desktop-portal-gtk

systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway

################
# Also... for opening different URI schemes:

Create ~/.local/share/applications/axis-client.desktop:

[Desktop Entry]
Name=Axis Client
Exec="/usr/lib/AxisSecurity/GUI/Axis Client" %u
Terminal=false
Type=Application
MimeType=x-scheme-handler/axis;


update-desktop-database ~/.local/share/applications
xdg-mime default axis-client.desktop x-scheme-handler/axis
